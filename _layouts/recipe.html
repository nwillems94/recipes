---
layout: post
---

<h1>{{ page.title }}</h1>

<h2>Ingredients</h2>

<label for="servings">Servings:</label>
<input type="number" id="servings" value="{{ page.servings }}" min="1" onchange="updateIngredients()">

<ul id="ingredientList">
  {% for ingredient in page.ingredients %}
    <li>
    <code>{{ ingredient.quantity }}</code> {{ ingredient.unit }} {{ ingredient.name }}
    </li>
  {% endfor %}
</ul>

<hr>

<p>{{ content }}</p>

<script>
  const defaultServings = parseFloat("{{ page.servings }}");

  function updateIngredients() {
    const newServings = parseFloat(document.getElementById('servings').value);
    document.querySelectorAll('#ingredientList li').forEach(item => {
      const baseQty = parseFloat(item.getAttribute('data-quantity'));
      const newQty = (baseQty / defaultServings) * newServings;

      // Format quantity as integer if possible
      const formattedQty = Number.isInteger(newQty) ? newQty.toString() : newQty.toFixed(2);
      item.querySelector('code').textContent = formattedQty;
    });
  }
</script>